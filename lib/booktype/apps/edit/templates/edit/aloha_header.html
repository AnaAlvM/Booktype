{% load staticfiles %}

<link rel="stylesheet" href="{% static "edit/js/aloha/css/aloha.css" %}" type="text/css">
<script src="{% static "edit/js/aloha/lib/vendor/jquery-1.7.2.js" %}"></script>   

<script>
    Aloha = window.Aloha || {};

    Aloha.settings = {
        jQuery: window.jQuery.noConflict(true),
        baseUrl: '{% static "edit/js/aloha/lib/" %}',

        sidebar: { disabled: true },
        predefinedModules: {
            'booktype': window.booktype,
            'jquery19': window.jQuery,
            'jqueryui': window.jQuery.ui,
            'underscore': _
        },
        plugins: {
            highlighteditables: {
                config: ['highlight'],        
                editables: {
                    '#mirko': [ 'highlight' ],
                    '#content': [ ] 
                }   
            }
        },
        contentHandler : {
                insertHtml: [ 'word', 'generic', 'oembed', 'sanitize' ],
                initEditable: [ 'sanitize' ],
                getContents: [ 'blockelement', 'sanitize', 'basic' ],
                sanitize: 'relaxed', // relaxed, restricted, basic,
                allows: {
                    elements: [
                        'strong', 'em', 'i', 'b', 'blockquote', 'br', 'cite', 'code', 'dd', 'div', 'dl', 'dt', 'em',
                        'i', 'li', 'ol', 'p', 'pre', 'q', 'small', 'strike', 'sub',
                        'sup', 'u', 'ul', 'img', 'table', 'th', 'tr', 'td'],
             
                    attributes: {
                        'img'       : ['src', 'alt', 'width', 'height', 'align'],
                        'a'         : ['href', 'id', 'class'],
                        'blockquote': ['cite'],
                        'q'         : ['cite'],
                        'sup'       : ['id', 'class']
                     },
             
                    protocols: {
                        'a'         : {'href': ['ftp', 'http', 'https', 'mailto', '__relative__']}, // Sanitize.RELATIVE
                        'blockquote': {'cite': ['http', 'https', '__relative__']},
                        'q'         : {'cite': ['http', 'https', '__relative__']}
                    }
                },
                handler: {
                    generic: {
                        transformFormattings: false // this will disable the transformFormattings method in the generic content handler
                    },
                    sanitize: {
                        '.aloha-captioned-image-caption': { elements: [ 'em', 'strong' ] }
                    }
                }
            }
    };

</script>
<script src="{% static "edit/js/aloha/lib/require.js" %}"></script>

<script src="{% static "edit/js/aloha/lib/aloha.js" %}"
    data-aloha-plugins="common/ui,
                        oer/toolbar,
                        common/format,
                        booktype/linkbooktype,
                        booktype/colorbooktype,
                        booktype/footnotes,
                        common/table,
                        common/list,
                        common/highlighteditables,
                        common/block,
                        common/undo,
                        oer/undobutton,
                        common/image,
                        common/contenthandler,
                        common/paste,
                        common/commands,
                        common/align"></script>
                        